# 获取每日股票分时数据
- 读取sources目录下的stock.csv文件
- 遍历每一行数据，获取股票代码和股票名称
- 对股票代码做下面的处理后,在调用接口获取分时数据
```js
  const code = 股票代码.replace(/\.(SZ|SH|SS|BJ)$/, '')
  const market = code.startsWith('6') ? '1' : '0'
  const secid = `${market}.${code}`
```
- 调用接口 https://74.push2.eastmoney.com/api/qt/stock/trends2/sse?fields1=f1,f2,f3,f4,f5,f6,f7,f8,f9,f10,f11,f12,f13,f17&fields2=f51,f52,f53,f54,f55,f56,f57,f58&mpi=1000&ut=fa5fd1943c7b386f172d6893dbfba10b&secid=0.300118&ndays=1&iscr=1&iscca=0&wbp2u=|0|0|0|web
其中 secid 生成股则见js代码
这是一个http sse接口，返回的数据格式如下,下面选取部分时段的返回数据:
```json
{
    "rc": 0,
    "rt": 10,
    "svr": 183120378,
    "lt": 1,
    "full": 1,
    "dlmkts": "",
    "data": {
        "code": "300118",
        "market": 0,
        "type": 80,
        "status": 0,
        "name": "东方日升",
        "decimal": 2,
        "preSettlement": 0.0,
        "preClose": 20.9,
        "beticks": "33300|34200|54000|33300|34200|41400|46800|54000",
        "trendsTotal": 256,
        "time": 1770091299,
        "kind": 1,
        "prePrice": 20.9,
        "hisPrePrices": [
            {
                "date": 20260203,
                "prePrice": 20.9
            }
        ],
        "trends": [
            "2026-02-03 09:15,20.90,20.90,20.90,20.90,0,0.00,20.900",
            "2026-02-03 09:16,20.20,21.59,21.59,20.20,0,0.00,20.900",
            "2026-02-03 09:17,21.59,21.59,21.59,21.59,0,0.00,20.900",
            "2026-02-03 09:18,21.59,21.59,21.59,21.59,0,0.00,20.900",
            "2026-02-03 09:19,21.59,21.59,21.59,21.59,0,0.00,20.900",
            "2026-02-03 09:20,21.59,21.59,21.65,21.59,0,0.00,20.900",
            "2026-02-03 09:21,21.59,21.59,21.59,21.59,0,0.00,20.900",
            "2026-02-03 09:22,21.59,21.59,21.59,21.59,0,0.00,20.900",
            "2026-02-03 09:23,21.59,21.59,21.59,21.59,0,0.00,20.900",
            "2026-02-03 09:24,21.59,21.59,21.59,21.58,0,0.00,20.900",
            "2026-02-03 09:25,21.59,21.59,21.59,21.59,0,0.00,20.900",
            "2026-02-03 09:26,21.44,21.44,21.44,21.44,19537,41886727.00,21.440",
            "2026-02-03 09:27,21.44,21.44,21.44,21.44,0,0.00,21.440",
            "2026-02-03 09:28,21.44,21.44,21.44,21.44,0,0.00,21.440",
            "2026-02-03 09:29,21.44,21.44,21.44,21.44,0,0.00,21.440",
            "2026-02-03 09:30,21.44,21.44,21.44,21.44,0,0.00,21.440",
            "2026-02-03 09:31,21.46,21.76,21.83,21.31,62100,133889674.00,21.532"
        ]
    }
}
```
- 解析返回数据，生成新的格式文件，其中925字段表示9:25的分时数据，对于数据时间应该是09:26，接下9点26分数据方法示例
    ```js
     const [date, , close, , , volume, turnover, avgPrice] = trendStr.split(',')
    ```
每一个股票生成下面的json格式
  ```json
  {
      "code": "300118",
      "type": 80,
      "name": "东方日升",
      "preClose": 20.9,
      "trendsTotal": 256,
      "time": 1770091299,
      "925": {
          "close":close
          "volume":,volume
          "turnover":,turnover
          "avgPrice":,avgPrice
      }
  }
```
- 所有股票生成一个大的文件，格式为一个数组:
    ```json
    [
      {
          "code": "300118",
          "type": 80,
          "name": "东方日升",
          "preClose": 20.9,
          "trendsTotal": 256,
          "time": 1770091299,
          "925": {
              "close":close
              "volume":,volume
              "turnover":,turnover
              "avgPrice":,avgPrice
          }
      }
  ]
```
写入到gitee仓库的klines目录下，文件格式为 时间(年月日如20260203).集合竞价.json
写入gitee参考hot_subject.py 代码，但是需要把公共部分拿出来